<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>Home &mdash; Eric S. Talbot</title>
            <link rel="stylesheet" href="_static/normalize.css" type="text/css">
            <link rel="stylesheet" href="_static/sphinx.css" type="text/css">
            <link rel="stylesheet" href="_static/main.css" type="text/css">
            <link rel="stylesheet" href="_static/flat.css" type="text/css">
            <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
            <link rel="stylesheet" href="_static/font-awesome.min.css" type="text/css">
        <link rel="shortcut icon" href="_static/tinkerer.ico" /><!-- Load modernizr and JQuery -->
        <script src="_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="_static/plugins.js"></script>
        <script src="_static/main.js"></script>
        <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="_static/underscore.js"></script><script type="text/javascript" src="_static/doctools.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            // Scroll to content if on small screen
            if (screen.width < 480)
            {
                $(document).scrollTop(document.getElementsByTagName("article")[0].offsetTop - 44);
            }
        });
    </script></head>
    <body role="document">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container"><header role="banner">
            <hgroup>
              <h1><a href="#">Eric S. Talbot</a></h1></hgroup>
          </header>
      <nav role="navigation">
            <ul><li class="main-nav">
                  <a href="#">Home</a>
                </li>
              </ul>
          </nav><div class="main-container" role="main"><div class="main wrapper body clearfix"><article><div class="timestamp postmeta">
            <span>April 21, 2016</span>
        </div>
        <div class="section">
            <h1><a href="2016/04/21/why_another_web_map.html">Why Another Web Map?</a></h1>
<p>I recently launched my new web map at <a class="reference external" href="http://ericstalbot.pythonanywhere.com/">http://ericstalbot.pythonanywhere.com/</a>.
I’m pretty excited about it, but why do we need another web map
when the internet already has so many very good ones?</p>
<p>I started working on the map back when I lived in Vermont, and
it’s original purpose was very simple: to help me plan
bike rides on the Green Mountain State’s beautiful back roads.
I had tried to use the internet’s existing maps, but they didn’t
work for me. So I decided to build my own map with a number
of improvements:</p>
<ul class="simple">
<li>My new map shows trails and class 4 roads, which are unmaintained
public right-of-way. They are usually unpassable to most vehicles
but they are fun to ride and provide important connections between
valleys.</li>
<li>You can zoom way out on my map, and the smaller, less important
roads never disappear. So you can zoom out far enough to plan
a longer ride, but still see all the tiny dirt roads that you
can piece together to make your ride fun.</li>
<li>The map does not have distracting features like hill shading.
The focus is on the roads, which makes it easy to
see how roads connect to each other and make
infinite possibilities for out-and-back and looping rides.</li>
<li>The router on the map has no concept of “best”, or “fastest”
path, so it does not force the path to follow the big
roads, which often have too much traffic. Instead, it
simply follows the least-distance path, which can produce
some fun rides and help you see possible paths that you’ve never
considered.</li>
</ul>
<p>Go ahead and try the map out. In the meantime, I’ll be working
on making it even better.</p>

        </div>
        <div class="postmeta">
        <div class="author">
            <span>Posted by Eric S. Talbot</span>
        </div>
        
        
        </div><div class="separator post_separator"></div><div class="timestamp postmeta">
            <span>January 24, 2014</span>
        </div>
        <div class="section">
            <h1><a href="2014/01/24/viewing_spatial_data_in_ipython.html">Viewing Spatial Data in IPython</a></h1>
<p>I do a lot of geospatial analysis for my work in transportation. My usual workflow
includes manipulating and analyzing data using IPython, and then viewing the
data by creating matplotlib plots, like this one:</p>
<blockquote>
<div><img alt="../../../_images/plot.png" src="_images/plot.png"/>
</div></blockquote>
<p>However, I frequently have found myself writing data to disk so I could explore
it more interactively using QGIS. And more recently, I’ve been creating one-off
HTML documents to view my data in slippy maps. Which got me thinking - how could you
combine the great tools of Python and IPython with the ability to interactively
explore data like you do in a desktop GIS or a web map?</p>
<p>Well, it turned out to be a lot easier than I expected. IPython is already
set up to render objects as HTML. All you have to do is provide a <cite>_repr_html_</cite>
method which returns an HTML string. So I wrote a class that is initialized
with a mapping in geojson format, and that has a <cite>_repr_html_</cite> method that returns
an HTML web map powered by Leaflet’s TileLayer and GeoJSON objects. So after
about 30 minutes and 60 lines (including a HTML template) this is what I had:</p>
<blockquote>
<div><img alt="../../../_images/webmap.png" src="_images/webmap.png"/>
</div></blockquote>
<p>Check out <a class="reference external" href="https://gist.github.com/ericstalbot/8605945">what</a> on github.</p>

        </div>
        <div class="postmeta">
        <div class="author">
            <span>Posted by Eric S. Talbot</span>
        </div>
        
        
        </div><div class="separator post_separator"></div><div class="timestamp postmeta">
            <span>December 20, 2013</span>
        </div>
        <div class="section">
            <h1><a href="2013/12/20/spatialdigraph.html">spatialdigraph</a></h1>
<p>NetworkX is a great Python package for working with networks. It sits right next to NumPy, matplotlib, and Shapely in my everyday transportation analysis toolbox. However, I’ve often wished that Networkx graphs had spatial capabilities. So that’s why I created <a class="reference external" href="https://github.com/ericstalbot/spatialdigraph">spatialdigraph</a>. Here’s how it works:</p>
<p>First, load a SpatialDiGraph of a highway interchange in New Hampshire:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">g</span> <span class="o">=</span> <span class="n">cPickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">'mygraph.pickle'</span><span class="p">))</span>
</pre></div>
</div>
<p>This graph is in WGS84, so let’s transform to UTM for better drawing:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">g</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">fiona</span><span class="o">.</span><span class="n">crs</span><span class="o">.</span><span class="n">from_epsg</span><span class="p">(</span><span class="mi">32617</span><span class="p">))</span>
</pre></div>
</div>
<p>And now we can draw the graph:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">node_args</span> <span class="o">=</span> <span class="p">{</span><span class="s">'s'</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span> <span class="n">edge_args</span> <span class="o">=</span> <span class="p">{</span><span class="s">'c'</span><span class="p">:</span><span class="s">'0.5'</span><span class="p">})</span>
</pre></div>
</div>
<p>The SpatialDiGraph is a networkx.DiGraph subclass, so we have access to lots of useful
methods from NetworkX. For example, we can get a shortest path on the network:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">origin</span><span class="p">,</span> <span class="n">destination</span> <span class="o">=</span> <span class="s">'194912632'</span><span class="p">,</span> <span class="s">'195049052'</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">destination</span><span class="p">)</span>
</pre></div>
</div>
<p>Then with the added functionality that the SpatialDiGraph provides we can draw the path:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">xy</span><span class="p">(</span><span class="o">*</span><span class="n">path</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="s">'b'</span><span class="p">,</span> <span class="n">lw</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>And just to make it pretty, let’s also highlight the origin and destination nodes:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">scatter_args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">zorder</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="s">'orange'</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">80</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s">'none'</span><span class="p">)</span>

<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">xy</span><span class="p">(</span><span class="n">origin</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">scatter_args</span><span class="p">)</span>

<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">xy</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">scatter_args</span><span class="p">)</span>
</pre></div>
</div>
<p>Here’s the final result:</p>
<a class="reference internal image-reference" href="_images/interchange.png"><img alt="../../../_images/interchange.png" src="_images/interchange.png" style="width: 600px;"/></a>
<p>spatialdigraph is still a work in progress, but feel free to <a class="reference external" href="https://github.com/ericstalbot/spatialdigraph">check it out</a> on GitHub.</p>

        </div>
        <div class="postmeta">
        <div class="author">
            <span>Posted by Eric S. Talbot</span>
        </div>
        
        
        </div><div class="separator post_separator"></div><div class="timestamp postmeta">
            <span>December 06, 2013</span>
        </div>
        <div class="section">
            <h1><a href="2013/12/06/bluetooth_vehicle_tracking___correcting_short_trip_bias.html">Bluetooth Vehicle Tracking:  Correcting Short Trip Bias</a></h1>
<p>A new thing in transportation analysis is the use of arrays of Bluetooth detectors
to track cars. The detectors work by recording the MAC IDs of wireless devices inside cars that
pass nearby. By linking together multiple detections of the same MAC ID across different detectors,
you can make a pretty good guess at the starting point, ending point, and route taken for a trip.</p>
<p>There is one problem, however. Detectors can “miss” cars: even though a car has a wireless device
inside, and it passes near a detector, the detector may fail to detect it. This has the effect of
making some trips appear shorter than they really are. Take for example a car that passes near detectors
1, 2, and 3. If detector 1 misses the car, the trip will appear to have passed by only
detectors 2 and 3.</p>
<p>To fix this problem, I’ve proposed an estimation method that explicitly accounts for missed
detections. My tests show improvements over a naive method that ignores missed detections:</p>
<a class="reference internal image-reference" href="_images/naive.png"><img alt="../../../_images/naive.png" src="_images/naive.png" style="width: 600px;"/></a>
<p>See my <a class="reference external" href="http://ericstalbot.github.io/bluetooth/TalbotBluetooth.pdf">paper</a> and IPython <a class="reference external" href="http://ericstalbot.github.io/bluetooth/RouteFlowsRoadsideDetectors-v2.html">notebook</a> for details on the estimation method.</p>

        </div>
        <div class="postmeta">
        <div class="author">
            <span>Posted by Eric S. Talbot</span>
        </div>
        
        
        </div><div class="archive_link">
        <a href="archive.html"> &mdash; Blog Archive &mdash; </a>
    </div></article><aside class="sidebar"><section><div class="widget">
    <h1>Recent Posts</h1>
    <ul><li>
            <a href="2016/04/21/why_another_web_map.html">Why Another Web Map?</a>
        </li><li>
            <a href="2014/01/24/viewing_spatial_data_in_ipython.html">Viewing Spatial Data in IPython</a>
        </li><li>
            <a href="2013/12/20/spatialdigraph.html">spatialdigraph</a>
        </li><li>
            <a href="2013/12/06/bluetooth_vehicle_tracking___correcting_short_trip_bias.html">Bluetooth Vehicle Tracking:  Correcting Short Trip Bias</a>
        </li></ul>
</div>
</section><section><div class="widget" id="searchbox" role="search">
    <h1><a href="#searchbox">Search</a></h1>
    <form action="search.html" method="get">
        <input type="text" name="q" />
        <button type="submit"><span class="fa fa-search"></span></button>
    </form>
</div></section></aside></div> <!-- #main --></div> <!-- #main-container -->

        <div class="footer-container" role="contentinfo"><footer class="wrapper">&copy; Copyright 2013, Eric S. Talbot. Powered by <a href="http://www.tinkerer.me/">Tinkerer</a> and <a href="http://sphinx.pocoo.org/">Sphinx</a>.</footer></div> <!-- footer-container -->

      </div> <!--! end of #container --><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->
    </body>
</html>